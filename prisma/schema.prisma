generator client {
  provider        = "prisma-client-js"
  binaryTargets   = ["native", "debian-openssl-3.0.x"]
  previewFeatures = ["multiSchema"]
}

datasource db {
  provider = "postgresql"
  url = env("DATABASE_URL")
  schemas = ["public", "auth"]
}

model Lake {
  id        Int       @id @default(autoincrement())
  name      String
  latitude  Float
  longitude Float
  distance  Float?
  media     Media[]   // relation to media files
  images    LakeImage[]

  @@schema("public")
}

model LakeImage {
  id        Int      @id @default(autoincrement())
  lake      Lake     @relation(fields: [lakeId], references: [id])
  lakeId    Int
  url       String
  isMain    Boolean  @default(false)
  latitude  Float?
  longitude Float?
  timestamp DateTime?
  createdAt DateTime @default(now())

  @@schema("public")
}

model Media {
  id       Int      @id @default(autoincrement())
  name     String
  type     String
  url      String
  lake     Lake?    @relation(fields: [lakeId], references: [id])
  lakeId   Int?
  createdAt DateTime @default(now())

  @@schema("public")
}